# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Pull request pipeline
on:  
  pull_request:
    branches:
      - master
jobs:
  cypress-run:
    timeout-minutes: 10
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - run: docker-compose build && docker-compose pull
      - name: Cypress run
        uses: cypress-io/github-action@v4
        with:
          install-command: npm install
          build: npm run build
          start: 'npm start'
          wait-on: 'npx wait-on -v --timeout 100000 http-get://localhost:8000'
      - name: Save cypress images
        uses: actions/upload-artifact@v2
        with:
          name: build
          if-no-files-found: error
          path: cypress-visual-screenshots